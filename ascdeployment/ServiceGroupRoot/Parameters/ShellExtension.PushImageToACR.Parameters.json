{
    "$schema": "http://schema.express.azure.com/schemas/2015-01-01-alpha/RolloutParameters.json",
    "contentVersion": "1.0.0.0",
    "shellExtensions": [
      {
        "name": "PushImageToACR",
        "type": "ShellExtensionType",
        "properties": {
          "maxexecutiontime": "PT1H"
        },
        "package": {
          "reference": {
            "path": "scripts.tar.gz"
          }
        },
        "launch": {
          "command": [
            "/bin/bash",
            "pushImageToAcr.sh"
          ],
          "environmentVariables": [
            {
                "name": "CDPX_ACR_RESOURCE_ID",
                "value": "__CDPX_ACR_RESOURCE_ID__"
            },
            {
                "name": "CDPX_IMAGE_TAG",
                "value": "__CDPX_IMAGE_TAG__"
            },
            {
                "name": "CDPX_REPO_NAME",
                "value": "__CDPX_REPO_NAME__"
            },
            {
                "name": "ACR_NAME",
                "value": "__ACR_NAME__" 
            },
            {
                "name": "IMAGE_REPO",
                "value": "__IMAGE_REPO__" 
            },
            {
                "name": "RELEASE_NAME",
                "value": "__RELEASE_NAME__" 
            },
            {
                "name": "IMAGE_TAG_SUFFIX",
                "value": "__IMAGE_TAG_SUFFIX__" 
            },
            {
                "name": "IMAGE_PATH",
                "value": "__IMAGE_PATH__" 
            }
          ],
          "identity": {
            "type": "UserAssigned",
            "userAssignedIdentities": [
              "__DEPLOYMENT_MANAGED_IDENTITY_RESOURCE_ID__"
            ]
          }
        }
      }
    ]
}